<link rel="stylesheet" href="/dependencies/bootstrap-4/bootstrap-4.css">
<link rel="stylesheet" href="/styles/importer.css">
<link rel="stylesheet" href="/dependencies/font-awesome-4/css/font-awesome.css">

<div id="lesson-create">
  <div class="container-contact100">
    <div class="wrap-contact100">
      <form class="contact100-form validate-form">
				<span class="contact100-form-title">
					Create some Lessons
				</span>

        <div class="wrap-input100 validate-input" data-validate = "Please enter your Subject ID">
          <input class="input100" type="text" id ="studentID" name="studentID" placeholder="<%=student[0].id%>">
          <span class="focus-input100"></span>
        </div>

        <div class="wrap-input100 validate-input" data-validate = "Please enter your Subject ID">
          <input class="input100" type="text" id ="subject1" name="subject1" placeholder="Enter a subjectID">
          <span class="focus-input100"></span>
        </div>

        <div class="wrap-input100 validate-input" data-validate = "Please enter your Subject ID">
          <input class="input100" type="text" id ="subject2" name="subject2" placeholder="Enter a subjectID">
          <span class="focus-input100"></span>
        </div>

        <div class="wrap-input100 validate-input" data-validate = "Please enter your Subject ID">
          <input class="input100" type="text" id ="subject3" name="subject3" placeholder="Enter a subjectID">
          <span class="focus-input100"></span>
        </div>
        <div class="wrap-input100 validate-input" data-validate = "Please enter your Subject ID">
          <input class="input100" type="text" id ="subject4" name="subject4" placeholder="Enter a subjectID">
          <span class="focus-input100"></span>
        </div>

        <div class="wrap-input100 validate-input" data-validate = "Please enter your Subject ID">
          <input class="input100" type="text" id ="subject5" name="subject5" placeholder="Enter a subjectID">
          <span class="focus-input100"></span>
        </div>

        <div class="wrap-input100 validate-input" data-validate = "Please enter your Subject ID">
          <input class="input100" type="text" id ="subject6" name="subject6" placeholder="Enter a subjectID">
          <span class="focus-input100"></span>
        </div>

      </form>
      <div class="container-contact100-form-btn">
        <button class="contact100-form-btn" value="Submit" id="submit" onclick="SendAjax();">
						<span>
							<i class="fa fa-paper-plane-o m-r-6" aria-hidden="true"></i>
							Submit
						</span>
        </button>
      </div>
    </div>
  </div>
</div>
<%- exposeLocalsToBrowser() %>
<script>
  // When click on button store values from form fields into variables
  function SendAjax() {
    let student = $("#studentID").val();
    if(student === ""){
      alert("Recheck all values are entered")
      return
    }
    let subject1 = $("#subject1").val();
    if(subject1 === ""){
      alert("Recheck all values are entered")
      return
    }
    let subject2 = $("#subject2").val();
    let subject3 = $("#subject3").val();
    let subject4 = $("#subject4").val();
    let subject5 = $("#subject5").val();
    let subject6 = $("#subject6").val();
    var subjects = [subject1, subject2, subject3, subject4, subject5, subject6];
    const csrf = window.SAILS_LOCALS._csrf;
    console.log(subjects);
    const subject = subjects.filter(function (e) {
      return e
    });
    // Check if fields are empty

    // AJAX code to submit form
    $.ajax ({
      type: "POST",
      url: "/admin/student-subject",
      headers: {
        'X-CSRF-TOKEN': csrf,
      },
      data: { "subjects": subject, "student": student,},
      success: function() {
        alert("This subjects have been added and this student is enrolled in these classes");
      },
      error: function(){
        //alert("this entry already exists");
      }
    })
  }
</script>
